<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haebub.dao.Lecture.LectureMapper">
    <select id="lectureList" resultType="com.haebub.dto.Lecutre.LectureDTO">
        select lid
                , lprofile
                , lgrade
                , ltitle
                , lprice
        from lecture
    </select>

    <!-- 나중에 선생 아이디 받아서 넣어야 됨-->
    <insert id="insertData" parameterType="com.haebub.dto.Lecutre.LectureDTO">
        insert into lecture (ltitle
                            , lprofile
                            , lintro
                            , lbook
                            , lprice
                            , lopendate
                            , lperiod
                            , lcount
                            , tid
                            , lgrade)
        values(#{ltitle}, #{lprofile}, #{lintro}, #{lbook}, #{lprice}, #{lopendate}, #{lperiod}, #{lcount}, 1, #{lgrade})
    </insert>

    <!-- 간단 디테일 -->
    <select id="lecDatail" resultType="com.haebub.dto.Lecutre.LectureDTO" parameterType="int">
        SELECT l.lid
            , l.ltitle
            , l.lintro
            , l.lbook
            , l.lprice
            , l.lopendate
            , l.lperiod
            , l.lcount
            , l.lprofile
            , l.lgrade
            , t.tintro
            , t.tsubject
            , u.name
        FROM lecture l INNER JOIN teacher t ON l.tid = t.tid INNER
                             JOIN user u ON t.uid = u.uid
        WHERE lid = #{lid}
    </select>

    <select id="freeList" resultType="com.haebub.dto.Lecutre.LectureDTO">
        select lid
            , lgrade
            , ltitle
            , lprice
        from lecture
        where lprice = 0
    </select>

    <select id="getLid" resultType="int">
        select max(lid)
        from lecture
    </select>

</mapper>

