<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haebub.dao.pay.PaymentMapper">

    <update id="makeCustomer" parameterType="hashmap">
        UPDATE user SET sp_uid = #{sp_uid}
        WHERE email = #{email};
    </update>

    <update id="makeProduct" parameterType="hashmap">
        UPDATE lecture
            SET sp_pcode = #{sp_pcode}
            ,sp_pplan = #{sp_pplan}
        WHERE lid = #{lid}
    </update>

    <insert id="purchaseOne" parameterType="hashmap">
        INSERT INTO purchase(ptime  ,uid  ,lid  ,pstatus  ,sp_ocode)
        VALUES(NOW()  ,#{uid}  ,#{lid}  ,  #{success}  ,#{order_code} )
    </insert>

    <insert id="insertCart" parameterType="hashmap">
        INSERT INTO fav(uid,lid)
        VALUES(#{uid},#{lid})
    </insert>

    <select id="getCartList" parameterType="string" resultType="hashmap">
        select uid,lid
        from fav
        where uid=#{uid}
    </select>

</mapper>